![Image](https://github.com/user-attachments/assets/3adc809d-be05-48e4-a364-84624b2af1d3)

본 프로젝트는 **TCP 소켓 프로그래밍**을 기반으로 한 클라이언트-서버 프로그램으로, 멀티 프로세스를 활용한 계산 기능과 자식 프로세스 관리, 그리고 결과 기록 기능을 포함합니다.  
두 개의 프로그램 **hw5_client**와 **hw5_server**로 구성되어 있습니다.

---

## hw5_client.c

### 실행 방법

실행 시 서버 IP 주소와 포트 번호를 인자로 입력받습니다.

### 동작 과정

- 클라이언트는 실행 시 서버의 IP와 포트 번호를 입력받아 TCP 소켓을 생성하고 서버에 연결합니다.
- 표준입력을 통해 다음과 같은 순서로 사용자 입력을 받습니다:
  - `Operand count:` 연산자의 개수 (char)
  - 각 피연산자 (int) 입력
  - 각 연산자 (`+`, `-`, `*`, `/`) 입력
- 입력된 데이터는 하나의 버퍼로 구성되어 서버로 전송됩니다.  
  전송 구조는 `{ operand_count | operand1, operand2, ... | operator1, operator2, ... }` 형식입니다.
- 서버로부터 계산 결과를 수신하여 표준 출력합니다.
- operand count가 0 이하인 경우, 해당 값만 서버로 전송하고 입력 없이 종료되며, 이는 서버에게 기록 종료를 알리는 신호입니다.

---

## hw5_server.c

### 실행 방법

실행 시 포트 번호 하나를 인자로 입력받습니다.

### 동작 과정

- 서버는 TCP 소켓을 생성하고, INADDR_ANY와 인자로 받은 포트 번호로 바인딩합니다.
- 클라이언트 연결 요청을 수락하면 "new client connected..." 메시지를 출력합니다.
- fork()를 통해 자식 프로세스를 생성하여 클라이언트에게 계산 서비스를 제공합니다.
- 자식 프로세스는 다음을 수행합니다:
  - 클라이언트로부터 받은 피연산자와 연산자를 기반으로 계산
  - 결과를 클라이언트에게 전송
  - 표준 출력으로 결과 출력
  - 파이프를 통해 부모 또는 기록 프로세스에 `"process id: <수식>=<결과>"` 형식으로 전달
- operand count가 0 이하인 경우, "Save file(<count>)" 메시지를 출력하고 기록용 자식 프로세스는 파일을 닫고 종료합니다.
- 서버는 sigaction()을 통해 자식 프로세스 종료를 감지하며, "Removed proc id: <PID>" 메시지를 출력합니다.

---

## 통신 플로우 요약

1. 서버는 클라이언트 연결을 대기합니다.
2. 클라이언트가 서버에 연결을 요청합니다.
3. 서버는 fork()를 통해 자식 프로세스를 생성합니다.
4. 자식 프로세스는 계산을 수행하고 결과를 클라이언트에게 전송합니다.
5. 계산 결과는 stdout에 출력되고, 파이프를 통해 기록 프로세스로 전달됩니다.
6. 클라이언트가 음수 operand count를 보내면 기록 프로세스는 종료됩니다.
7. 서버는 SIGCHLD를 통해 자식 종료 시 메시지를 출력합니다.
8. 각 클라이언트 종료 시 해당 자식 프로세스도 함께 종료됩니다.

---

## 빌드 및 실행결과

![Image](https://github.com/user-attachments/assets/38b63270-84fc-4dc7-91d3-a1a9df30cfdb)
