![Image](https://github.com/user-attachments/assets/3adc809d-be05-48e4-a364-84624b2af1d3)

본 프로젝트는 TCP 소켓 프로그래밍을 기반으로 한 클라이언트-서버 프로그램으로, 호스트명 해석과 파일 전송 기능을 구현합니다.  
두 개의 프로그램 **hw4_client**와 **hw4_server**로 구성되어 있습니다.

---

## hw4_client.c

### 실행 모드

클라이언트는 실행 시 전달된 인자의 개수에 따라 두 가지 모드로 동작합니다.

1. **도메인 이름만 입력한 경우**

- `gethostbyname()` 함수를 사용하여 도메인 이름을 조회합니다.
- 조회한 정보를 다음 형식으로 출력합니다.

  ```
  <gethostbyname() or gethostbyaddr()>
  Official name: <공식 도메인 이름>
  Aliases <인덱스>: <별칭 도메인 이름>
  ...

  Address type: <AF_INET or AF_INET6>
  IP addr <인덱스>: <IP 주소>
  ...
  ```

- 조회된 첫 번째 IP 주소를 이용해 `gethostbyaddr()`를 호출하여 다시 정보를 얻고 같은 형식으로 출력합니다.

2. **IP 주소와 포트 번호를 입력한 경우**

- TCP 소켓을 생성합니다.
- `getsockopt()`를 사용하여 소켓 타입을 확인하고 다음과 같이 출력합니다.

  ```
  This socket type is : SOCK_STREAM
  ```

  (또는 `This sock type is : 1(1)` 형식)

- `copy.txt` 파일을 읽기/쓰기 권한으로 열거나 없으면 새로 생성합니다.
- 입력받은 IP와 포트로 서버에 연결합니다.
- 서버로부터 파일 데이터를 모두 받아 `copy.txt`에 저장합니다.
- 파일 수신 완료 후 `"Received file data"` 문자열을 출력합니다.
- 서버가 half close 상태가 되어 데이터를 받을 준비가 되면, 저장한 `copy.txt` 내용을 읽어 서버로 다시 전송합니다.
- 모든 작업 완료 후 파일과 소켓을 닫고 종료합니다.

---

## hw4_server.c

### 실행 방법

서버는 포트 번호 하나를 인자로 받아 실행합니다.

### 동작 과정

- TCP 소켓을 생성합니다.
- `INADDR_ANY`와 인자로 받은 포트 번호로 바인드합니다.
- `SO_REUSEADDR` 옵션을 설정해 주소 및 포트 재사용을 허용합니다.
- 실행 파일과 동일한 디렉토리에 있는 `test.txt` 파일을 읽기 전용으로 엽니다.

- 클라이언트의 연결 요청을 받아들입니다.
- `test.txt` 파일 내용을 클라이언트에게 전송합니다.
- 전송이 끝나면 half close(쓰기 버퍼 닫기)를 수행합니다.
- 클라이언트가 보낸 데이터를 받아 `"Message from Client"`와 함께 출력합니다.
- 파일과 소켓을 닫고 프로그램을 종료합니다.

---

## 통신 플로우 요약

1. 서버는 클라이언트 연결을 대기합니다.
2. 클라이언트가 서버에 연결을 요청합니다.
3. 서버는 `test.txt` 내용을 클라이언트로 전송합니다.
4. 서버는 쓰기 버퍼를 닫아 half close 상태가 됩니다.
5. 클라이언트는 받은 데이터를 `copy.txt`에 저장합니다.
6. 클라이언트는 저장한 `copy.txt` 내용을 읽어 서버로 재전송합니다.
7. 서버는 클라이언트 메시지를 수신해 출력합니다.
8. 양측 모두 소켓을 닫고 종료합니다.

---

## 빌드 및 실행결과

![Image](https://github.com/user-attachments/assets/38b63270-84fc-4dc7-91d3-a1a9df30cfdb)
